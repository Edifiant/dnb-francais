<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Objectif Brevet - Cahier de RÃ©visions</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root {
    --bg:#f8fafc; --bristol:#ffffff; --marge:#fb7185; --ligne:#e2e8f0;
    --bleu:#2563eb; --violet:#7c3aed; --vert:#10b981; --orange:#f59e0b;
    --texte:#1e293b; --texte-sec:#334155; --card-border:#e2e8f0;
    --nav-bg:#ffffff; --nav-text:#1e293b;
    --highlight-bg:#f1f5f9;
    --quiz-bg:#ffffff;
    --opt-bg:#f8fafc; --opt-hover:#eff6ff;
}

body.dark-mode {
    --bg:#0f172a; --bristol:#1e293b; --marge:#be123c; --ligne:#334155;
    --bleu:#60a5fa; --violet:#a78bfa; --vert:#34d399; --orange:#fbbf24;
    --texte:#f1f5f9; --texte-sec:#cbd5e1; --card-border:#334155;
    --nav-bg:#1e293b; --nav-text:#f1f5f9;
    --highlight-bg:#334155;
    --quiz-bg:#1e293b;
    --opt-bg:#0f172a; --opt-hover:#1e293b;
}

body { font-family:'Inter','Segoe UI',sans-serif; background:var(--bg); margin:0; padding:20px; color:var(--texte); transition:0.3s; padding-top:80px;}
.container{max-width:850px;margin:0 auto;position:relative;}

.top-bar{
position:fixed;top:0;left:0;right:0;
background:rgba(255,255,255,0.9);
backdrop-filter:blur(10px);
border-bottom:1px solid var(--card-border);
padding:10px 20px;z-index:999;
display:flex;justify-content:space-between;align-items:center;
}
body.dark-mode .top-bar{background:rgba(15,23,42,0.9);}
.score-display{font-weight:800;font-size:1.2rem;color:var(--violet);}
.theme-toggle{background:transparent;border:2px solid var(--card-border);color:var(--texte);padding:5px 10px;border-radius:20px;cursor:pointer;}

.main-title{text-align:center;font-size:2.8rem;font-weight:900;margin:20px 0 30px 0;}
.nav-menu{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:30px;justify-content:center;}
.nav-btn{padding:10px 20px;border-radius:50px;border:2px solid var(--btn-color);background:var(--nav-bg);color:var(--btn-color);cursor:pointer;font-weight:700;transition:0.2s;}
.nav-btn:hover,.nav-btn.active{background:var(--btn-color);color:white;transform:translateY(-2px);}

.fiche-bristol{
background:var(--bristol);
border:1px solid var(--card-border);
margin-bottom:30px;
padding:45px 35px 45px 80px;
position:relative;
background-image:linear-gradient(var(--ligne) 1px,transparent 1px);
background-size:100% 2.6rem;
line-height:2.6rem;
border-radius:12px;
}
.fiche-bristol::before{
content:"";
position:absolute;
top:0;left:65px;bottom:0;width:2px;
background:var(--marge);opacity:0.6;
}
.fiche-bristol h2{margin:0 0 0.8rem 0;color:var(--bleu);font-size:1.8rem;border-bottom:3px solid var(--bleu);display:inline-block;line-height:1.2;}
.auteur-portrait{width:110px;height:140px;object-fit:cover;float:right;margin-left:20px;border-radius:12px;border:4px solid var(--bg);transform:rotate(2deg);}
.badge-info{background:var(--violet);color:white;padding:4px 16px;border-radius:20px;font-size:0.85rem;font-weight:bold;display:inline-block;margin-bottom:12px;line-height:1;}
.info-highlight{background:var(--highlight-bg);padding:10px 15px;border-radius:8px;border-left:5px solid var(--violet);line-height:1.5;margin-top:15px;color:var(--texte);}

/* FLASHCARDS */
.flashcard-container{perspective:1000px;margin-bottom:30px;}
.flashcard{
width:100%;min-height:300px;position:relative;
transform-style:preserve-3d;
transition:transform 0.6s;
cursor:pointer;
}
.flashcard.flipped{transform:rotateY(180deg);}
.flashcard-face{
position:absolute;width:100%;backface-visibility:hidden;
}
.flashcard-back{transform:rotateY(180deg);}

.timeline-container{margin-top:30px;background:var(--ligne);height:8px;border-radius:4px;position:relative;clear:both;}
.timeline-bar{height:100%;background:var(--violet);border-radius:4px;}
.timeline-labels{display:flex;justify-content:space-between;font-size:0.75rem;color:var(--texte-sec);margin-top:8px;font-weight:600;}
</style>
</head>
<body>

<div class="top-bar">
<div class="score-display" id="scoreBoard"></div>
<button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™</button>
</div>

<div class="container">
<h1 class="main-title">ðŸŽ“ Objectif Brevet</h1>
<div class="nav-menu" id="menu"></div>
<div id="app">Chargement...</div>
</div>

<script>
function toggleTheme(){document.body.classList.toggle('dark-mode');}

const sections=[
{ name:"Auteurs", gid:"951178030", color:"#06b6d4" }
];

const spreadsheetUrl="https://docs.google.com/spreadsheets/d/e/2PACX-1vRoAJJNx2wqbdV3bqbJDt0cmf8DPCCk39wiQa4fdpkHj8fFcKBf0T4viApM-A3lSWbXHeJ8uasSh-M0/pub?single=true&output=csv&gid=";

const app=document.getElementById('app');
const menu=document.getElementById('menu');

sections.forEach((s)=>{
const btn=document.createElement('button');
btn.className='nav-btn';
btn.innerText=s.name;
btn.style.setProperty('--btn-color',s.color);
btn.onclick=()=>loadData(s.gid,btn);
menu.appendChild(btn);
});

function loadData(gid,btn){
document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
btn.classList.add('active');
Papa.parse(spreadsheetUrl+gid,{download:true,header:true,skipEmptyLines:true,
complete:(results)=>render(results.data)});
}

function render(data){
let html="";

data.forEach((row)=>{

if(row.Auteur){

const siecle=row.SiÃ¨cle||"";
let progress=10;
if(siecle.includes("XVII"))progress=35;
else if(siecle.includes("XVIII"))progress=55;
else if(siecle.includes("XIX"))progress=75;
else if(siecle.includes("XX"))progress=95;

html+=`
<div class="flashcard-container">
<div class="flashcard" onclick="this.classList.toggle('flipped')">

<div class="flashcard-face fiche-bristol">
${(row.Image||row.image)?`<img src="${row.Image||row.image}" class="auteur-portrait">`:''}
<div class="badge-info">${siecle} siÃ¨cle</div><br>
<h2>${row.Auteur}</h2>
<div class="info-highlight">
Clique pour rÃ©vÃ©ler l'Å“uvre et le courant
</div>
<div style="clear:both;"></div>
</div>

<div class="flashcard-face flashcard-back fiche-bristol">
<h2>${row.Auteur}</h2>
<div class="info-highlight"><strong>Å’uvre :</strong> <em>${row.Å’uvre||"N/A"}</em></div>
<div class="info-highlight" style="border-left-color: var(--vert);">
<strong>Courant :</strong> ${row.Courant||row.Mouvement||"N/A"}
</div>

<div class="timeline-container">
<div class="timeline-bar" style="width:${progress}%"></div>
</div>
<div class="timeline-labels">
<span>16e</span><span>17e</span><span>18e</span><span>19e</span><span>20e</span>
</div>
</div>

</div>
</div>`;
}

});

app.innerHTML=html||"<p style='text-align:center;'>Aucune donnÃ©e trouvÃ©e.</p>";
}

loadData(sections[0].gid,menu.firstChild);
</script>
</body>
</html>
